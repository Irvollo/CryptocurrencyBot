{"version":3,"sources":["../index.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,qCAAqC;AAGrC,+CAA8C;AAuCrC,mBAvCA,mBAAQ,CAuCA;AAtCjB,yCAAwC;AAsCrB,gBAtCV,aAAK,CAsCU;AArCxB,iDAAgD;AAqCtB,oBArCjB,qBAAS,CAqCiB;AApCnC,6CAAqD;AAoChB,wBApC5B,oBAAa,CAoC4B;AAnClD,sDAAqD;AACrD,6CAA+C;AAC/C,mDAAqD;AACrD,uCAA2C;AAG3C,IAAM,WAAW,GAAG,mBAAQ,CAAC,WAAW,CAAC;AA6BW,kCAAW;AA3B/D,0BAAiC,QAA2B;IAC1D,+DAA+D;IAC/D,IAAM,SAAS,GAAI,QAA+B,CAAC,QAAQ,CAAC,eAAe,CACzE,UAAU,EACV,UAAC,GAAG,EAAE,MAAM,EAAE,GAAG,IAAK,OAAA,yBAAW,CAAC,WAAW,EAAE,CAAC,eAAe,CAAC,GAAG,EAAE,GAAG,CAAC,EAAnD,CAAmD;IACzE,yCAAyC;IACzC;QACE,SAAS,uBAAA;QACT,KAAK,eAAA;QACL,QAAQ,qBAAA;QACR,aAAa,sBAAA;QACb,QAAQ,UAAA;QACR,WAAW,aAAA;QACX,WAAW,aAAA;KACZ,EACD,IAAI,EACJ,IAAI,CACL,CAAC;IAEF,EAAE,CAAC,CAAC,gBAAS,EAAE,CAAC,CAAC,CAAC;QAChB,MAAM,CAAC,OAAO,GAAG,SAAS,CAAC;IAC7B,CAAC;AACH,CAAC;AAtBD,4CAsBC;AAED,gBAAgB,CAAC,aAAQ,CAAC,CAAC;AAK3B,uDAAsD;AAA7C,sCAAA,YAAY,CAAA;AACrB,uDAAsD;AAA7C,sCAAA,YAAY,CAAA","file":"index.js","sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport firebase from '@firebase/app';\nimport { FirebaseApp, FirebaseNamespace } from '@firebase/app-types';\nimport { _FirebaseNamespace } from '@firebase/app-types/private';\nimport { Database } from './src/api/Database';\nimport { Query } from './src/api/Query';\nimport { Reference } from './src/api/Reference';\nimport { enableLogging } from './src/core/util/util';\nimport { RepoManager } from './src/core/RepoManager';\nimport * as INTERNAL from './src/api/internal';\nimport * as TEST_ACCESS from './src/api/test_access';\nimport { isNodeSdk } from '@firebase/util';\nimport * as types from '@firebase/database-types';\n\nconst ServerValue = Database.ServerValue;\n\nexport function registerDatabase(instance: FirebaseNamespace) {\n  // Register the Database Service with the 'firebase' namespace.\n  const namespace = (instance as _FirebaseNamespace).INTERNAL.registerService(\n    'database',\n    (app, unused, url) => RepoManager.getInstance().databaseFromApp(app, url),\n    // firebase.database namespace properties\n    {\n      Reference,\n      Query,\n      Database,\n      enableLogging,\n      INTERNAL,\n      ServerValue,\n      TEST_ACCESS\n    },\n    null,\n    true\n  );\n\n  if (isNodeSdk()) {\n    module.exports = namespace;\n  }\n}\n\nregisterDatabase(firebase);\n\n// Types to export for the admin SDK\nexport { Database, Query, Reference, enableLogging, ServerValue };\n\nexport { DataSnapshot } from './src/api/DataSnapshot';\nexport { OnDisconnect } from './src/api/onDisconnect';\n\ndeclare module '@firebase/app-types' {\n  interface FirebaseNamespace {\n    database?: {\n      (app?: FirebaseApp): types.FirebaseDatabase;\n      enableLogging: typeof types.enableLogging;\n      ServerValue: types.ServerValue;\n      Database: typeof types.FirebaseDatabase;\n    };\n  }\n  interface FirebaseApp {\n    database?(databaseURL?: string): types.FirebaseDatabase;\n  }\n}\n"]}